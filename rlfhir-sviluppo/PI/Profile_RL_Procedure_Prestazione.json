{
  "resourceType": "StructureDefinition",
  "id": "UUID",
  "url": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedurePrestazione",
  "name": "RLProcedurePrestazione",
  "status": "active",
  "description": "Profilo contentente il dettaglio di una prestazione erogata al paziente in qualsiasi setting assistenziale.",
  "keyword": [
    {
      "system": "https://fhir.siss.regione.lombardia.it/CodeSystem/Tag",
      "code": "PI"
    }
  ],
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Procedure",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Procedure",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Procedure.id",
        "path": "Procedure.id",
        "short": "UUID prodotto dal server FHIR (applicativo) che detiene la risorsa. Per maggiori informazioni su chi detiene la risorsa consultare il paragrafo API-Restful nella pagina di Contesto.",
        "min": 1
      },
      {
        "id": "Procedure.meta",
        "path": "Procedure.meta",
        "short": "Metadati della risorsa",
        "min": 1
      },
      {
        "id": "Procedure.meta.versionId",
        "path": "Procedure.meta.versionId",
        "short": "Versione della risorsa",
        "min": 1
      },
      {
        "id": "Procedure.meta.lastUpdated",
        "path": "Procedure.meta.lastUpdated",
        "short": "Data e ora di ultimo aggiornamento della risorsa",
        "definition": "Formato standard FHIR: YYY-MM-DDThh:mm:ss.sss+zz:zz",
        "min": 1
      },
      {
        "id": "Procedure.meta.profile",
        "path": "Procedure.meta.profile",
        "short": "Profilo al quale la risorsa si riferisce",
        "min": 1,
        "max": "1",
        "fixedCanonical": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedurePrestazione"
      },
      {
        "id": "Procedure.extension",
        "path": "Procedure.extension",
        "min": 4
      },
      {
        "id": "Procedure.extension:dataPresaInCarico",
        "path": "Procedure.extension",
        "sliceName": "dataPresaInCarico",
        "short": "Data della presa in carico del paziente da parte dell'Ente Erogatore. Il campo deve essere obbligatoriamente valorizzato nel caso in cui la prestazione sia stata erogata in regime di ricovero domiciliare.",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureDataPresaInCarico"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:dataPresaInCarico.value[x]",
        "path": "Procedure.extension.value[x]",
        "short": "Data della presa in carico del paziente da parte dell'Ente Erogatore",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR"
      },
      {
        "id": "Procedure.extension:modalitaErogazione",
        "path": "Procedure.extension",
        "sliceName": "modalitaErogazione",
        "short": "Codice e descrizione della modalità di erogazione della prestazione",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella delle modalità di erogazione contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureModalitaErogazione"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x]",
        "path": "Procedure.extension.value[x]",
        "short": "Modalità di erogazione",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding",
        "path": "Procedure.extension.value[x].coding",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding.system",
        "path": "Procedure.extension.value[x].coding.system",
        "min": 1,
        "fixedUri": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-ModalitaErogazione"
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding.code",
        "path": "Procedure.extension.value[x].coding.code",
        "short": "Codice della modalità di erogazione",
        "definition": "Codice numerico di al più 2 caratteri",
        "min": 1,
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla modalità di erogazione",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-ModalitaErogazione"
        }
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding.display",
        "path": "Procedure.extension.value[x].coding.display",
        "short": "Descrizione della modalità di erogazione",
        "definition": "Stringa alfanumerica di al più di 50 caratteri",
        "comment": "Le descrizioni della modalità di erogazione sono ricavate dal tracciato SIAD 3",
        "min": 1
      },
      {
        "id": "Procedure.extension:numeroAccesso",
        "path": "Procedure.extension",
        "sliceName": "numeroAccesso",
        "short": "Questo campo è da valorizzare obbligatoriamente nel caso in cui la prestazione sia stata erogata in regime di ricovero domiciliare. Il valore di default è '1' ed indica che la prestazione definita nel campo 'code' erogata nella data indicata nel campo 'perfomedDateTime' è stata effettuata durante il primo accesso giornaliero dell'operatore. Nel caso in cui la stessa prestazione venga erogata più volte nell'arco della stessa giornata tramite accessi domiciliari multipli questo campo deve essere valorizzato in modo incrementale coerentemente al numero di accesso. Si specifica che deve sempre essere creata un'istanza per ogni singola prestazione, anche se questa sia erogata più volte durante lo stesso accesso domiciliare.",
        "definition": "Stringa numerica di una cifra",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureNumeroAccesso"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:tipoAccesso",
        "path": "Procedure.extension",
        "sliceName": "tipoAccesso",
        "short": "Tipo di accesso dell'operatore a domicilio dell'assistito. Il campo può essere valorizzato nel caso in cui la prestazione sia stata erogata in regime di ricovero domiciliare.",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella del tipo di accesso contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureTipoAccesso"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x].coding",
        "path": "Procedure.extension.value[x].coding",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x].coding.system",
        "path": "Procedure.extension.value[x].coding.system",
        "min": 1,
        "fixedUri": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-TipoAccesso"
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x].coding.code",
        "path": "Procedure.extension.value[x].coding.code",
        "short": "Codice del tipo di accesso",
        "definition": "Stringa numerica di una cifra",
        "min": 1,
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla codifica del tipo di accesso",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-TipoAccesso"
        }
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x].coding.display",
        "path": "Procedure.extension.value[x].coding.display",
        "short": "Descrizione del tipo di accesso",
        "definition": "Stringa alfanumerica di al più di 50 caratteri",
        "min": 1
      },
      {
        "id": "Procedure.basedOn",
        "path": "Procedure.basedOn",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "reference"
            }
          ],
          "rules": "open"
        },
        "min": 2,
        "max": "2"
      },
      {
        "id": "Procedure.basedOn:RLServiceRequestServiziSocioAssistenziali",
        "path": "Procedure.basedOn",
        "sliceName": "RLServiceRequestServiziSocioAssistenziali",
        "short": "Riferimento alla richiesta di attivazione delle cure domiciliari. Nel caso in cui siano stati attivati due percorsi di cura combinati, il campo deve fare riferimento al percorso sotto la quale la prestazione è stata erogata.",
        "definition": "Reference al profilo RLServiceRequestServiziSocioAssistenziali contenente i dettagli della richiesta di attivazione delle cure domiciliari.",
        "comment": "Campo da compilare nel caso in cui la prestazione sia erogata in setting assistenziale domiciliare",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLServiceRequestServiziSocioAssistenziali"
            ]
          }
        ]
      },
      {
        "id": "Procedure.basedOn:RLCarePlanProgettoIndividuale",
        "path": "Procedure.basedOn",
        "sliceName": "RLCarePlanProgettoIndividuale",
        "short": "Riferimento al progetto individuale contentente la richiesta di attivazione delle cure domiciliari",
        "definition": "Reference al profilo RLCarePlanProgettoIndividuale contente il progetto individuale del paziente. UUID prodotto dal server FHIR (applicativo) che detiene la risorsa. Per maggiori informazioni su chi detiene la risorsa consultare il paragrafo API-Restful nella pagina di Contesto.",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLCarePlanProgettoIndividuale"
            ]
          }
        ]
      },
      {
        "id": "Procedure.status",
        "path": "Procedure.status",
        "short": "Stato della prestazione",
        "definition": "Valore fisso su \"completed\"",
        "fixedCode": "completed"
      },
      {
        "id": "Procedure.category",
        "path": "Procedure.category",
        "short": "Setting assistenziale nel quale la prestazione viene erogata",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella delle tipologie di setting assistenziale contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 1
      },
      {
        "id": "Procedure.category.coding",
        "path": "Procedure.category.coding",
        "short": "Codice e descrizione del setting assistenziale",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Procedure.category.coding.system",
        "path": "Procedure.category.coding.system",
        "min": 1,
        "fixedUri": "https://fhir.siss.regione.lombardia.it/ValueSet/SGDT-SettingAssistenziale"
      },
      {
        "id": "Procedure.category.coding.code",
        "path": "Procedure.category.coding.code",
        "short": "Codice del setting assistenziale",
        "definition": "Stringa alfanumerica di al più di 10 caratteri",
        "min": 1,
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla codifica del setting assistenziale",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SGDT-SettingAssistenziale"
        }
      },
      {
        "id": "Procedure.category.coding.display",
        "path": "Procedure.category.coding.display",
        "short": "Descrizione del setting assistenziale",
        "definition": "Stringa alfanumerica di al più di 100 caratteri",
        "min": 1
      },
      {
        "id": "Procedure.code",
        "path": "Procedure.code",
        "short": "Codifica della prestazione. Il contenuto informativo è vincolato dal setting assistenziale nel quale la prestazione viene erogata.",
        "min": 1
      },
      {
        "id": "Procedure.code.coding",
        "path": "Procedure.code.coding",
        "short": "Codice e descrizione della prestazione",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Procedure.code.coding.system",
        "path": "Procedure.code.coding.system",
        "min": 1,
        "fixedUri": "https://fhir.siss.regione.lombardia.it/ValueSet/SGDT-TipologiaPrestazione"
      },
      {
        "id": "Procedure.code.coding.code",
        "path": "Procedure.code.coding.code",
        "short": "Codice della prestazione",
        "definition": "Stringa alfanumerica di 10 caratteri",
        "min": 1,
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla tipologia di prestazione",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/Prestazioni"
        }
      },
      {
        "id": "Procedure.code.coding.display",
        "path": "Procedure.code.coding.display",
        "short": "Descrizione della prestazione",
        "definition": "Stringa alfanumerica di al più di 200 caratteri",
        "comment": "A seconda del setting assistenzale in cui la prestazione viene erogata è definita un'apposita codifica consultabile nella Tabella delle prestazioni contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 1
      },
      {
        "id": "Procedure.subject",
        "path": "Procedure.subject",
        "short": "Paziente al quale deve essere erogata la prestazione",
        "definition": "Reference alla risorsa RLPatientCittadino contenente i dettagli anagrafici del paziente",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPatientCittadino"
            ]
          }
        ]
      },
      {
        "id": "Procedure.performed[x]",
        "path": "Procedure.performed[x]",
        "short": "Data (e ora, se disponibile) in cui la prestazione è stata erogata al paziente",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR. \r\nNel caso in cui fosse disponibile anche l'ora compilare con il formato: YYYY-MM-DDThh:mm:ss+zz:zz secondo lo standard FHIR",
        "min": 1,
        "type": [
          {
            "code": "dateTime"
          }
        ]
      },
      {
        "id": "Procedure.performer",
        "path": "Procedure.performer",
        "short": "Operatore sanitario che ha erogato la prestazione",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Procedure.performer.actor",
        "path": "Procedure.performer.actor",
        "short": "Nel caso di una prestazione erogata in regime di ricovero domiciliare questo campo deve essere obbligatoriamente compilato per contienere la tipologia di operatore che ha effettuato la prestazione",
        "definition": "Reference al profilo RLPractitionerRoleOperatoreADI",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPractitionerRoleOperatoreADI"
            ]
          }
        ]
      },
      {
        "id": "Procedure.location",
        "path": "Procedure.location",
        "short": "Reference alla tipologia di luogo in cui  le prestazioni vengono erogate. Attulalmente il riferimento deifinsce solo le tipologie inerenti alla prestazioni erogate agli assisititi in regime di ricovero domicilare",
        "definition": "Reference al profilo RLLocationLuogoPrestazioneCureDom",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLLocationLuogoPrestazioneCureDom"
            ]
          }
        ]
      }
    ]
  }
}