{
  "resourceType": "StructureDefinition",
  "url": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPatientCore",
  "name": "RLPatientCore",
  "status": "draft",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Patient",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Patient",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Patient.extension:cittadinanza",
        "path": "Patient.extension",
        "sliceName": "cittadinanza",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/patient-citizenship"
            ]
          }
        ],
        "isModifier": false,
        "binding": {
          "strength": "required",
          "description": "Cittadinanza",
          "valueSet": "https://hl7.org/fhir/extensions/StructureDefinition-patient-citizenship.html"
        }
      },
      {
        "id": "Patient.extension:titoloDiStudio",
        "path": "Patient.extension",
        "sliceName": "titoloDiStudio",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPatientTitoloDiStudio"
            ]
          }
        ],
        "isModifier": false,
        "binding": {
          "strength": "required",
          "description": "Titolo di studio",
          "valueSet": "https://www.hl7.it/fhir/StructureDefinition/patient-qualification-it"
        }
      },
      {
        "id": "Patient.extension:posizioneDellaProfessione",
        "path": "Patient.extension",
        "sliceName": "posizioneDellaProfessione",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPatientPosizioneDellaProfessione"
            ]
          }
        ],
        "isModifier": false,
        "binding": {
          "strength": "required",
          "description": "Professione",
          "valueSet": "https://www.hl7.it/fhir/StructureDefinition/patient-occupation-it"
        }
      },
      {
        "id": "Patient.extension:luogoDiNascita",
        "path": "Patient.extension",
        "sliceName": "luogoDiNascita",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/patient-birthPlace"
            ]
          }
        ],
        "isModifier": false,
        "binding": {
          "strength": "required",
          "description": "Indica il luogo di nascita. Tipicamente attraverso il codice comune o stato di nascita",
          "valueSet": "https://hl7.org/fhir/extensions/StructureDefinition-patient-birthPlace.html"
        }
      },
      {
        "id": "Patient.identifier",
        "path": "Patient.identifier",
        "slicing": {
          "description": "slices",
          "rules": "open"
        },
        "short": "Identificativi del paziente"
      },
      {
        "id": "Patient.identifier:codiceFiscale",
        "path": "Patient.identifier",
        "sliceName": "codiceFiscale",
        "fixedIdentifier": {
          "system": "https://www.hl7.it/sid/codiceFiscale"
        },
        "constraint": [
          {
            "key": "rl-pat-codiceFiscale",
            "severity": "warning",
            "human": "Il Codice Fiscale deve essere di 16 caratteri alfanumerici (3 per il cognome; 3 per il nome; 2 caratteri numerici per l'anno di nascita; 1 per il mese di nascita; 2 caratteri numerici per il giorno di nascita ed il sesso; 4 associati al Comune oppure allo Stato estero di nascita.1",
            "expression": "matches('^[A-Za-z]{6}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{3}[A-Za-z]{1}$')"
          }
        ]
      },
      {
        "id": "Patient.identifier:codiceSTP",
        "path": "Patient.identifier",
        "sliceName": "codiceSTP",
        "short": "Codice STP"
      },
      {
        "id": "Patient.identifier:codiceSTP.extension",
        "path": "Patient.identifier.extension",
        "binding": {
          "strength": "required",
          "valueSet": "https://www.hl7.it/fhir/base/ValueSet-uri-idStp.html"
        }
      },
      {
        "id": "Patient.identifier:tesseraTEAM",
        "path": "Patient.identifier",
        "sliceName": "tesseraTEAM",
        "short": "Tessera TEAM",
        "comment": "Corrispondente campo HL7 secondo specifiche regionali: PID-3",
        "fixedIdentifier": {
          "value": "https://fhir.siss.regione.lombardia.it/CodeSystem/TesseraTEAM"
        }
      },
      {
        "id": "Patient.identifier:codiceENI",
        "path": "Patient.identifier",
        "sliceName": "codiceENI",
        "short": "Codice ENI"
      },
      {
        "id": "Patient.identifier:codiceENI.extension",
        "path": "Patient.identifier.extension",
        "binding": {
          "strength": "required",
          "valueSet": "https://www.hl7.it/fhir/base/ValueSet-uri-idEni.html"
        }
      },
      {
        "id": "Patient.identifier:anpr",
        "path": "Patient.identifier",
        "sliceName": "anpr",
        "fixedIdentifier": {
          "system": "http://hl7.it/sid/anpr"
        }
      },
      {
        "id": "Patient.identifier:idRegionale",
        "path": "Patient.identifier",
        "sliceName": "idRegionale"
      },
      {
        "id": "Patient.identifier:idRegionale.extension",
        "path": "Patient.identifier.extension",
        "binding": {
          "strength": "required",
          "valueSet": "https://www.hl7.it/fhir/base/ValueSet-uri-idRegionali.html"
        }
      },
      {
        "id": "Patient.name",
        "path": "Patient.name",
        "short": "Cognome e nome del paziente",
        "definition": "L'attributo deve essere utilizzato per indicare il nome e il cognome del paziente nella comunicazione delle etichette tramite dati strutturati.",
        "constraint": [
          {
            "key": "rl-pat-name",
            "severity": "warning",
            "human": "Patient.name.given or Patient.name.family or both SHALL be present",
            "expression": "given.exists() or family.exists()"
          }
        ]
      },
      {
        "id": "Patient.name.family",
        "path": "Patient.name.family",
        "short": "Cognome del paziente",
        "definition": "Stringa alfabetica di massimo 40 caratteri"
      },
      {
        "id": "Patient.name.given",
        "path": "Patient.name.given",
        "short": "Nome del paziente",
        "definition": "Stringa alfabetica di massimo 40 caratteri"
      },
      {
        "id": "Patient.address",
        "path": "Patient.address",
        "short": "Indirizzo fisico o postale"
      },
      {
        "id": "Patient.maritalStatus",
        "path": "Patient.maritalStatus",
        "short": "Stato civile del paziente",
        "definition": "E' preferibile utilizzare il Valueset indicato in Terminology binding.",
        "binding": {
          "strength": "extensible",
          "valueSet": "https://www.hl7.it/fhir/base/ValueSet-statoCivile.html"
        }
      }
    ]
  }
}